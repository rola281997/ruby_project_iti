<p id="notice"><%= notice %></p>
<%= link_to 'See Cart', carts_path, class:'btn btn-primary text-white' %>

<h1>Products</h1>
<%= simple_form_for :search, url: root_path, method: "GET", html: { class: 'form-inline' } do |f| %>
  <%= f.input :title , input_html: {value: ""} %>   
  <%= f.submit "Search", class: "btn btn-primary" %>
<% end %>
<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Description</th>
      <th>Price</th>
      <th>In stock</th>
      <th>Category</th>
      <th>Brand</th>
      <th>Image</th>
      <th>Actions</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @products.each do |product| %>
      <tr>
        <td><%= product.title %></td>
        <td><%= product.description %></td>
        <td><%= product.price %></td>
        <td><%= product.inStock_amount %></td>
        <td><%= product.category.name %></td>
        <td><%= product.brand.name %></td>
        <td><%=image_tag(product.image, style: "width:50px; height:35px; margin:5px", class: "rounded") if product.image.attached?%></td>
        <td><%= link_to 'Show', product ,  class:'btn btn-primary text-white' %></td>
        <% if can? :update , product  %>
            <td><%= link_to 'Edit', edit_product_path(product) , class: 'btn btn-info text-white'  %></td>
        <% end %>

         <% if can? :destroy , product %>  
            <td><%= link_to 'Delete', product, method: :delete,  class: 'btn btn-danger text-white' ,
                data: { confirm: 'Are you sure?' } %></td>
                
         <% end %>

         <td> <%= form_tag("/carts/addtocart", method: "get") do %>
          <%= hidden_field_tag(:id, product.id) %>
          <%= submit_tag "Add to cart" %>
        <% end %></td> 
      </tr>
     

    <% end %>
  </tbody>
  
</table>

<br>
<% if current_user.role == "seller" %> 
    <%= link_to 'New Product', new_product_path  , class: 'btn btn-success btn.lg text-white' %>
 <% end %>  
